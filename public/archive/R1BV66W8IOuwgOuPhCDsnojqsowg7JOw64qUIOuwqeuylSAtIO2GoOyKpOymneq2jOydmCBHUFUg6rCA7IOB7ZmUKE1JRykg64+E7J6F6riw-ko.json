{"content":"<body>\n<p>모든 ML 태스크가 고성능 GPU를 필요로 하는 것은 아니며, 작은 모델의 경우 고성능 GPU 사용 시 자원 낭비가 발생합니다. 이러한 낭비를 줄이기 위해 클라우드 활용, 혼합 GPU 운영, GPU 가상화(MIG, MPS) 세 가지 방법이 있습니다.</p>\n<ul>\n<li>\n<p><strong>클라우드 활용</strong>: 빠르고 유연한 자원 확장이 장점이지만, 장기적 사용 시 비용이 더 발생할 수 있고 보안 및 컴플라이언스 제약이 있습니다.</p>\n</li>\n<li>\n<p><strong>혼합 GPU 운영</strong>: 작업 특성에 맞는 GPU 할당이 가능하지만, 운영 복잡성이 증가하고 수요 편중으로 인한 자원 낭비 가능성이 있습니다.</p>\n</li>\n<li>\n<p><strong>GPU 가상화</strong>: 고성능 GPU를 여러 인스턴스로 분할하여 자원 효율성을 극대화하고 균일한 환경을 유지할 수 있습니다. NVIDIA의 MIG는 하드웨어 기반으로 안정적이며, MPS는 소프트웨어 기반으로 유연하지만 격리가 어렵습니다.</p>\n</li>\n</ul>\n<p>토스증권은 단일 아키텍처 운용, 추론 속도 일관성, 유연한 자원 전환 및 세분화를 위해 GPU 가상화, 특히 MIG를 선택했습니다. H100/H200 GPU 기반 클러스터 구성으로 MIG 지원이 가능했고, MPS보다 안정적인 MIG의 운영 이점을 고려했습니다.</p>\n<p><strong>MIG 설정 과정</strong>:</p>\n<ol>\n<li>\n<p><strong>GPU 설정</strong>: MIG 비활성화 확인, MIG 모드 활성화, GPU 인스턴스(GI) 생성, 컴퓨트 인스턴스(CI) 생성 단계를 거칩니다.</p>\n</li>\n<li>\n<p><strong>Kubernetes 컴포넌트 재배포</strong>: nvidia-device-plugin의 MIG_STRATEGY 환경 변수를 'mixed'로 설정하여 재배포합니다. MIG 구성 변경 시에는 파드 재시작으로 반영됩니다.</p>\n</li>\n<li>\n<p><strong>모니터링 셋업</strong>: dcgm-exporter를 재배포하여 MIG 인스턴스별 SM 사용률(DCGM_FI_PROF_SM_ACTIVE) 및 메모리 사용량(DCGM_FI_DEV_FB_USED 등)을 모니터링합니다. Grafana 대시보드를 통해 시각화할 수 있습니다.</p>\n</li>\n</ol>\n<p><strong>사용 방법</strong>: Kubernetes 환경에서는 원하는 MIG 인스턴스 스펙을 nvidia.com/mig-1g.10gb: 1과 같이 지정하여 리소스를 요청합니다. 토스증권은 GUI를 통해 사용자 친화적인 환경을 제공합니다.</p>\n<p>MIG는 다양한 규모의 워크로드가 혼재하는 환경에서 GPU 자원을 효율적으로 활용할 수 있는 실용적인 선택지입니다. MIG 도입 시 설정 및 운영 측면의 노하우를 참고하여 최적의 환경을 구축할 수 있습니다.</p>\n</body>","createdAt":"2025-08-12T16:16:59.707Z","language":"ko"}