{"content":"<body>\n이 게시물은 플레이어가 자신의 토큰을 한 줄에 네 개씩 맞추는 게임의 온라인 버전을 만드는 데 필요한 핵심 개념을 살펴봅니다. AWS Amplify Gen 2를 사용하여 AWS 백엔드에 빠르게 연결하는 방법과 AWS AppSync 이벤트가 WebSocket 연결을 사용하여 플레이어가 실시간으로 게임 업데이트를 보낼 수 있도록 하는 방법을 알아봅니다.\n\n이 게시물은 AppSync 이벤트 시리즈의 두 번째 게시물입니다.\n\n애플리케이션 개요\n본 애플리케이션은 온라인으로 플레이할 수 있으며 채팅 기능도 지원합니다. 플레이어는 사용자 이름을 입력하고 고유한 게임 코드를 생성하여 상대방과 공유합니다. 게임 생성자는 플레이어 1(빨간색)이 되고, 게임에 참여하는 사람은 플레이어 2(노란색)가 됩니다. 네 개의 동일한 색상 조각이 세로, 가로 또는 대각선으로 한 줄에 놓이면 게임이 자동으로 중지됩니다.\n\n이 애플리케이션의 백엔드는 Amazon Cognito(IAM 권한이 있는 비인증 액세스 제공)와 AWS AppSync 이벤트(수백만 명의 구독자에게 확장되는 독립형 WebSocket 엔드포인트)의 두 가지 핵심 AWS 서비스로 구성됩니다.\n\nIAM 권한 부여를 사용한 AWS AppSync 이벤트 API 생성\nAppSync 이벤트 API는 IAM 인증 모드를 사용하여 보안 비인증 액세스를 제공할 수 있습니다. Amplify는 AWS CDK 위에 얇은 계층을 사용하여 이벤트 API를 생성합니다. amplify/backend.ts 파일에서 인증이 구성되며, Cognito Identity Pool은 앱에 로그인하지 않은 사용자를 승인하는 데 사용됩니다.\n\n`CfnApi` 및 `CfnChannelNamespace` AWS CDK L1 구성을 사용하여 이벤트 API를 생성하고 IAM을 인증 모드로 지정합니다. 그런 다음 Cognito Identity Pool에 대한 IAM 정책을 연결하여 API를 호출할 수 있도록 합니다. Amplify는 `backend.addOutput`을 사용하여 이벤트 API의 URL, AWS 리전 및 기본 인증 유형과 같은 관련 값을 프론트엔드 애플리케이션에 전달합니다.\n\nAWS Amplify를 사용하여 AppSync 이벤트 API에 연결\nNext.js 애플리케이션에서 `aws-amplify/data` 라이브러리의 `events.connect` 메서드를 사용하여 WebSocket 엔드포인트에 연결합니다. `useEffect` 호출 내에서 게임 상태 업데이트를 수신하고 UI에 렌더링하기 위해 연결을 구독합니다. 페이지가 닫히거나 이동될 때 메모리 누수를 방지하기 위해 구독을 정리합니다.\n\n플레이어가 게임 보드에 조각을 놓거나 새 게임/재설정 게임 버튼을 클릭할 때 이벤트 API를 사용하여 게임 데이터를 게시합니다. 채팅 메시지를 보내는 프로세스도 동일하며, `/game/${gameCode}/chat` 세그먼트로 메시지를 게시합니다.\n\n결론\nAWS AppSync 이벤트 API는 Next.js와 같은 최신 프론트엔드 프레임워크와 결합될 때 애플리케이션에 실시간 기능을 제공합니다. AWS Amplify는 AWS CDK L1 구성을 사용하여 AppSync 이벤트 API를 확장하는 데 사용할 수 있습니다. AppSync 이벤트 API는 무료 티어에서 250,000개의 이벤트 작업을 제공하며 수백만 명의 구독자에게 확장됩니다.\n</body>","createdAt":"2025-08-12T16:27:02.437Z","language":"ko"}